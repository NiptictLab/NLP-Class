### download myg2p dictionary
wget https://raw.githubusercontent.com/ye-kyaw-thu/myG2P/master/ver1.1/myg2p.ver1.1.txt

### cut field 3 and 4
cut -f3 ./myg2p.ver1.1.txt > grapheme
cut -f4 ./myg2p.ver1.1.txt > phoneme

### Remove dotted four lines ...
...ဖြစ်စေ...ဖြစ်စေ	... ဖြစ် စေ... ဖြစ် စေ	... hpji' sei ... hpji' sei
2	...ရိုး..စဉ်	... ရိုး.. စဉ်	jou: ... sin
3	...ရိုး..စဉ်	... ရိုး.. စဉ်	jou: ... zin
4	...လို...ငြား	... လို... ငြား	... lou ... nja:

### Copy ch2col.pl file
Link:
https://github.com/ye-kyaw-thu/myPOS/blob/master/corpus-draft-ver-1.0/model/crf/ch2col.pl

### Change line to column format
perl ./ch2col.pl ./grapheme > ./grapheme.col
perl ./ch2col.pl ./phoneme > ./phoneme.col

### Check no. of sentences of the two column output files
lar@lar-air:/media/lar/Transcend/utycc/myPOS/corpus-draft-ver-1.0/model/utycc-g2p$ wc *.col
  95850   71052  833229 grapheme.col
  95862   71064  418521 phoneme.col

### We found ERROR!

i.e. 95850 VS 95862 

### How to find the error sentences
paste ./grapheme ./phoneme > grapheme-phoneme

က က တစ်	ka. ga- di'
က က တိုး	ka. ga- dou:
က ကု သန်	ka. ku. than
က ကု သန်	kau' ka- than
က ကူ ရံ	ka. ku jan
က ကြိုး	ka. gyou:
က ကြိုး တန် ဆာ	ka. gyou: da- za
က ကြီ က ကြောင် လုပ်	ga- gyi ga- gyaun lou'
က ကြီး	ka. gyi:
က ကြီး ထွန်	ka. gyi: htun

We need to compare length of pair words (i.e. length of grapheme and phoneme)

### I wrote following perl program:

chk-pair-length.pl

perl ./chk-pair-length.pl ./grapheme-phoneme
စ ကားဖောင်: 2, za- ga: hpaun: 3
ဣန် ဒြေ: 2, ein da- rei: 3
ဣန် ဒြေ ကြီး: 3, ein da- rei kyi:: 4
ဣန် ဒြေ ဆည်: 3, ein da- rei hse: 4
ဣန် ဒြေ ဆောင်: 3, ein da- rei hsaun: 4
ဣန် ဒြေ ပျက်: 3, ein da- rei pje': 4
ဣန် ဒြေ မဲ့: 3, ein da- rei me.: 4
ဣန် ဒြေ ရ: 3, ein da- rei ja.: 4
ဣန် ဒြေ ရှင်: 3, ein da- rei shin: 4
ဣန် ဒြေ ရှိ: 3, ein da- rei shi.: 4
ဣန် ဒြေ လုပ်: 3, ein da- rei lou': 4
ဣန် ဒြေ သမ် ပတ် တိ: 5, ein da- rei than pa' ti.: 6

I edited above grapheme and phoneme pairs as follows for adjusting alignment:

ဣန် ဒြေ	ein da-rei
ဣန် ဒြေ ကြီး	ein da-rei kyi:
ဣန် ဒြေ ဆည်	ein da-rei hse
ဣန် ဒြေ ဆောင်	ein da-rei hsaun
ဣန် ဒြေ ပျက်	ein da-rei pje'
ဣန် ဒြေ မဲ့	ein da-rei me.
ဣန် ဒြေ ရ	ein da-rei ja.
ဣန် ဒြေ ရှင်	ein da-rei shin
ဣန် ဒြေ ရှိ	ein da-rei shi.
ဣန် ဒြေ လုပ်	ein da-rei lou'
ဣန် ဒြေ သမ် ပတ် တိ	ein da-rei than pa' ti.

======

Comment from Khaing Hsu Wai:

She found some more error lines ... (note she wrote program with Python programming language)
12643
22084

=======

I deleted following lines:

Line no. 12643
မ... သေး	ma- ...

Line no. 22084
အ ပြင်... လည်း	a- pjin ...

=========

lar@lar-air:/media/lar/Transcend/utycc/myPOS/corpus-draft-ver-1.0/model/utycc-g2p$ cut -f1 ./grapheme-phoneme > grapheme
lar@lar-air:/media/lar/Transcend/utycc/myPOS/corpus-draft-ver-1.0/model/utycc-g2p$ cut -f2 ./grapheme-phoneme > phoneme
lar@lar-air:/media/lar/Transcend/utycc/myPOS/corpus-draft-ver-1.0/model/utycc-g2p$ gedit grapheme; gedit phoneme
lar@lar-air:/media/lar/Transcend/utycc/myPOS/corpus-draft-ver-1.0/model/utycc-g2p$ perl ./ch2col.pl ./grapheme > grapheme.col
lar@lar-air:/media/lar/Transcend/utycc/myPOS/corpus-draft-ver-1.0/model/utycc-g2p$ perl ./ch2col.pl ./phoneme > phoneme.col
lar@lar-air:/media/lar/Transcend/utycc/myPOS/corpus-draft-ver-1.0/model/utycc-g2p$ wc *.
wc: '*.': No such file or directory
lar@lar-air:/media/lar/Transcend/utycc/myPOS/corpus-draft-ver-1.0/model/utycc-g2p$ wc *.col
  95847   71050  833194 grapheme.col
  95847   71050  418483 phoneme.col
 191694  142100 1251677 total

=======

### Make shuffle and prepare training and test data

lar@lar-air:/media/lar/Transcend/utycc/myPOS/corpus-draft-ver-1.0/model/utycc-g2p$ shuf  ./grapheme-phoneme > grapheme-phoneme.shuf
lar@lar-air:/media/lar/Transcend/utycc/myPOS/corpus-draft-ver-1.0/model/utycc-g2p$ gedit ./grapheme-phoneme.shuf 
lar@lar-air:/media/lar/Transcend/utycc/myPOS/corpus-draft-ver-1.0/model/utycc-g2p$ wc ./grapheme-phoneme.shuf 
  24797  142100 1059983 ./grapheme-phoneme.shuf
lar@lar-air:/media/lar/Transcend/utycc/myPOS/corpus-draft-ver-1.0/model/utycc-g2p$ head -n 20000 ./grapheme-phoneme.shuf > ./grapheme-phoneme.shuf.train
lar@lar-air:/media/lar/Transcend/utycc/myPOS/corpus-draft-ver-1.0/model/utycc-g2p$ tail -n 4797 ./grapheme-phoneme.shuf > ./grapheme-phoneme.shuf.test
lar@lar-air:/media/lar/Transcend/utycc/myPOS/corpus-draft-ver-1.0/model/utycc-g2p$ wc *.train
 20000 114480 853992 grapheme-phoneme.shuf.train
lar@lar-air:/media/lar/Transcend/utycc/myPOS/corpus-draft-ver-1.0/model/utycc-g2p$ wc *.test
  4797  27620 205991 grapheme-phoneme.shuf.test

### Divide grapheme and phoneme pairs for training and test

lar@lar-air:/media/lar/Transcend/utycc/myPOS/corpus-draft-ver-1.0/model/utycc-g2p$ cut -f1 ./grapheme-phoneme.shuf.train > train.gra
lar@lar-air:/media/lar/Transcend/utycc/myPOS/corpus-draft-ver-1.0/model/utycc-g2p$ cut -f2 ./grapheme-phoneme.shuf.train > train.pho
lar@lar-air:/media/lar/Transcend/utycc/myPOS/corpus-draft-ver-1.0/model/utycc-g2p$ cut -f1 ./grapheme-phoneme.shuf.test > test.gra
lar@lar-air:/media/lar/Transcend/utycc/myPOS/corpus-draft-ver-1.0/model/utycc-g2p$ cut -f2 ./grapheme-phoneme.shuf.test > test.pho
lar@lar-air:/media/lar/Transcend/utycc/myPOS/corpus-draft-ver-1.0/model/utycc-g2p$ head -n 3 *.gra
==> test.gra <==
ရှေ့ ဖြစ်
ဒေါ သ ထွက်
နိ ယ ထုံ

==> train.gra <==
သု ဝဏ် ဏ သာ မ ဇာတ်
သမ် ဘာ
လှည့် ဖြား
lar@lar-air:/media/lar/Transcend/utycc/myPOS/corpus-draft-ver-1.0/model/utycc-g2p$ head -n 3 *.pho
==> test.pho <==
shei. bji'
do: dha. htwe'
ni. ja- htoun

==> train.pho <==
thu. wun na. tha ma. za'
dha- ba
lhe. bja:

==========
### Change line to column

*** Note, if you use ch2col.pl, you will get "word<SPACE>" outputs ...
*** Reason, ch2col.pl is prepared for myPOS data (i.e. word/tag format)

I updated as "ch2column.pl". And thus, please use "ch2column.pl" for myG2P data!!!

lar@lar-air:/media/lar/Transcend/utycc/myPOS/corpus-draft-ver-1.0/model/utycc-g2p$ perl ./ch2column.pl ./train.gra > train.gra.col
lar@lar-air:/media/lar/Transcend/utycc/myPOS/corpus-draft-ver-1.0/model/utycc-g2p$ perl ./ch2column.pl ./train.pho > train.pho.col
lar@lar-air:/media/lar/Transcend/utycc/myPOS/corpus-draft-ver-1.0/model/utycc-g2p$ perl ./ch2column.pl ./test.gra > test.gra.col
lar@lar-air:/media/lar/Transcend/utycc/myPOS/corpus-draft-ver-1.0/model/utycc-g2p$ perl ./ch2column.pl ./test.pho > test.pho.col

### Prepare CRF++ format 

### For training data

lar@lar-air:/media/lar/Transcend/utycc/myPOS/corpus-draft-ver-1.0/model/utycc-g2p$ perl ./ch2column.pl ./train.gra > train.gra.col
lar@lar-air:/media/lar/Transcend/utycc/myPOS/corpus-draft-ver-1.0/model/utycc-g2p$ perl ./ch2column.pl ./train.pho > train.pho.col

lar@lar-air:/media/lar/Transcend/utycc/myPOS/corpus-draft-ver-1.0/model/utycc-g2p$ paste ./train.gra.col ./train.pho.col > train.crf

### For test data

lar@lar-air:/media/lar/Transcend/utycc/myPOS/corpus-draft-ver-1.0/model/utycc-g2p$ perl ./ch2column.pl ./test.gra > test.gra.col
lar@lar-air:/media/lar/Transcend/utycc/myPOS/corpus-draft-ver-1.0/model/utycc-g2p$ perl ./ch2column.pl ./test.pho > test.pho.col

lar@lar-air:/media/lar/Transcend/utycc/myPOS/corpus-draft-ver-1.0/model/utycc-g2p$ paste ./test.gra.col ./test.pho.col > test.crf

Now it looks OK!!!

### Train CRF Model with training data

*** Check your CRF++ template file at first ...
For our case: template (filename)

time crf_learn template ./train.crf ./utycc-g2p.model
CRF++: Yet Another CRF Tool Kit
Copyright (C) 2005-2013 Taku Kudo, All rights reserved.

reading training data: 100.. 200.. 300.. 400.. 500.. 600.. 700.. 800.. 900.. 1000.. 1100.. 1200.. 1300.. 1400.. 1500.. 1600.. 1700.. 1800.. 1900.. 2000.. 2100.. 2200.. 2300.. 2400.. 2500.. 2600.. 2700.. 2800.. 2900.. 3000.. 3100.. 3200.. 3300.. 3400.. 3500.. 3600.. 3700.. 3800.. 3900.. 4000.. 4100.. 4200.. 4300.. 4400.. 4500.. 4600.. 4700.. 4800.. 4900.. 5000.. 5100.. 5200.. 5300.. 5400.. 5500.. 5600.. 5700.. 5800.. 5900.. 6000.. 6100.. 6200.. 6300.. 6400.. 6500.. 6600.. 6700.. 6800.. 6900.. 7000.. 7100.. 7200.. 7300.. 7400.. 7500.. 7600.. 7700.. 7800.. 7900.. 8000.. 8100.. 8200.. 8300.. 8400.. 8500.. 8600.. 8700.. 8800.. 8900.. 9000.. 9100.. 9200.. 9300.. 9400.. 9500.. 9600.. 9700.. 9800.. 9900.. 10000.. 10100.. 10200.. 10300.. 10400.. 10500.. 10600.. 10700.. 10800.. 10900.. 11000.. 11100.. 11200.. 11300.. 11400.. 11500.. 11600.. 11700.. 11800.. 11900.. 12000.. 12100.. 12200.. 12300.. 12400.. 12500.. 12600.. 12700.. 12800.. 12900.. 13000.. 13100.. 13200.. 13300.. 13400.. 13500.. 13600.. 13700.. 13800.. 13900.. 14000.. 14100.. 14200.. 14300.. 14400.. 14500.. 14600.. 14700.. 14800.. 14900.. 15000.. 15100.. 15200.. 15300.. 15400.. 15500.. 15600.. 15700.. 15800.. 15900.. 16000.. 16100.. 16200.. 16300.. 16400.. 16500.. 16600.. 16700.. 16800.. 16900.. 17000.. 17100.. 17200.. 17300.. 17400.. 17500.. 17600.. 17700.. 17800.. 17900.. 18000.. 18100.. 18200.. 18300.. 18400.. 18500.. 18600.. 18700.. 18800.. 18900.. 19000.. 19100.. 19200.. 19300.. 19400.. 19500.. 19600.. 19700.. 19800.. 19900.. 20000.. 
Done!1.31 s

Number of sentences: 20000
Number of features:  17340057
Number of thread(s): 4
Freq:                1
eta:                 0.00010
C:                   1.00000
shrinking size:      20


### Testing CRF Model with test data

### Evaluation


